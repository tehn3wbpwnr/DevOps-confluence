<!DOCTYPE html>
<html>
    <head>
        <title>DevOps / Pipeline &amp; Deployment : Using Unity BatchMode CLI Commands as DevOps Engineer</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps / Pipeline &amp; Deployment</a></span>
                            </li>
                                                    <li>
                                <span><a href="1179353439.html">DevOps / Pipeline &amp; Deployment Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Developer-Documents_1611694083.html">Developer Documents</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps / Pipeline &amp; Deployment : Using Unity BatchMode CLI Commands as DevOps Engineer
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Jindo Kim</span>, last modified on Mar 13, 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-Objective"><style>[data-colorid=pskqin41c1]{color:#ff5630} html[data-color-mode=dark] [data-colorid=pskqin41c1]{color:#cf2600}[data-colorid=pk3g71qgl8]{color:#ff5630} html[data-color-mode=dark] [data-colorid=pk3g71qgl8]{color:#cf2600}[data-colorid=ut4n3ph65p]{color:#ff5630} html[data-color-mode=dark] [data-colorid=ut4n3ph65p]{color:#cf2600}</style>Objective</h1><ul><li><p>Unlike the Unity Editor, which provides separate workflows for Test Runner(Test Framework), Code Coverage, and Build, Unity Batchmode CLI commands require DevOps engineers to combine specific arguments based on their targets. This document aims to explain how DevOps Engineers can use Batchmode commands to run tests, generate Code Coverage, and create WebGL builds while also providing a clear understanding of the necessary arguments.</p></li></ul><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p>If you are not familiar with the overall Unity Tests, Code Coverage, and WebGL in Unity, please refer to <a data-card-appearance="inline" href="https://varlab-dev.atlassian.net/wiki/x/CYA5Z?atlOrigin=eyJpIjoiMGViMjQ5MmZlNTlmNDBjNGIyNTEyNjc2NmIzYmE0YjkiLCJwIjoiYyJ9" rel="nofollow">https://varlab-dev.atlassian.net/wiki/x/CYA5Z?atlOrigin=eyJpIjoiMGViMjQ5MmZlNTlmNDBjNGIyNTEyNjc2NmIzYmE0YjkiLCJwIjoiYyJ9</a></p></div></div><style type="text/css">/*<![CDATA[*/
div.rbtoc1748352978864 {padding: 0px;}
div.rbtoc1748352978864 ul {list-style: none;margin-left: 0px;}
div.rbtoc1748352978864 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1748352978864">
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-1.WhatdoesitmeantoruntheUnityEditorinBatchMode?">1. What does it mean to run the Unity Editor in Batch Mode?</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.BatchModeCLIcommandforTasks">2. BatchMode CLI command for Tasks</a>
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.1.BaseBatchModeCLI">2.1. Base BatchMode CLI</a>
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.1.1.BatchModeCommandArguments:">2.1.1. BatchMode Command Arguments:</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.1.2.Example(TradesElectricalProjectonJenkinsServer)">2.1.2. Example (Trades Electrical Project on Jenkins Server)</a></li>
</ul>
</li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.EditMode&amp;PlayModeTest(MostComplicateandImportant)">2.2. EditMode &amp; PlayMode Test (Most Complicate and Important)</a>
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.1.BatchModeCommandArgumentsfromUnityCLI:">2.2.1. BatchMode Command Arguments from Unity CLI:</a>
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.1.1EditMode">2.2.1.1 EditMode</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.1.2PlayMode">2.2.1.2 PlayMode</a></li>
</ul>
</li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.2.BatchModeCommandArgumentsfromTestFrameworkPackage:">2.2.2. BatchMode Command Arguments from Test Framework Package:</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.3.BatchModeCommandArgumentsfromCodeCoveragePackage:">2.2.3. BatchMode Command Arguments from Code Coverage Package:</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.4.Example(TradesElectricalProjectonJenkinsServer)">2.2.4. Example (Trades Electrical Project on Jenkins Server)</a></li>
</ul>
</li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.CodeCoverageReports">2.3. Code Coverage Reports</a>
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.1.Prerequisites">2.3.1. Prerequisites</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.1.BatchModeCommandArgumentsfromUnityCLI:">2.3.1. BatchMode Command Arguments from Unity CLI:</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.2.BatchModeCommandArgumentsfromCodeCoveragePackage:">2.3.2. BatchMode Command Arguments from Code Coverage Package:</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.3.Example(TradesElectricalProjectonJenkinsServer)">2.3.3. Example (Trades Electrical Project on Jenkins Server)</a></li>
</ul>
</li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.WebGLBuild">2.4. WebGL Build</a>
<ul class="toc-indentation">
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.1.Prerequisites">2.4.1. Prerequisites</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.2.TechInvolved:Xvfb(VirtualFramebuffer)">2.4.2. Tech Involved: Xvfb (Virtual Framebuffer)</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.3.BatchModeCommandArgumentsfromUnityCLI:">2.4.3. BatchMode Command Arguments from Unity CLI:</a></li>
<li><a href="#UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.4.Example(TradesElectricalProjectonJenkinsServer)">2.4.4. Example (Trades Electrical Project on Jenkins Server)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h2 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-1.WhatdoesitmeantoruntheUnityEditorinBatchMode?">1. What does it mean to run the Unity Editor in Batch Mode?</h2><ul><li><p>Running the Unity Editor in <strong>Batch Mode </strong>means executing Unity from the command line (CLI) without launching the graphical user interface (GUI). This is often called running Unity in a <strong>headless mode</strong>, with no windows or interactive elements displayed. Instead, Unity operates in the background, processing tasks automatically based on predefined commands or scripts.</p></li><li><p>This approach is commonly used for automation, such as building projects, running tests, or performing repetitive tasks without manual intervention through the Unity Editor's GUI. The following packages and resources are involved in BatchMode operations:</p><ul><li><p>Test Framework: <a class="external-link" data-card-appearance="inline" href="https://docs.unity3d.com/Packages/com.unity.test-framework@1.4/manual/index.html" rel="nofollow">https://docs.unity3d.com/Packages/com.unity.test-framework@1.4/manual/index.html</a> </p></li><li><p>Code Coverage: <a class="external-link" data-card-appearance="inline" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/index.html" rel="nofollow">https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/index.html</a> </p></li><li><p>Unity Batchmode CLI: <a class="external-link" data-card-appearance="inline" href="https://docs.unity3d.com/Manual/CommandLineArguments.html" rel="nofollow">https://docs.unity3d.com/Manual/CommandLineArguments.html</a> </p></li></ul></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p><strong>It is essential to check which versions of the Test Framework and Code Coverage packages are used in the project. Additionally, verifying the version of the Unity Editor that the project uses when working with Unity Batchmode CLI is crucial.</strong></p></div></div><hr /><hr /><h2 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.BatchModeCLIcommandforTasks">2. BatchMode CLI command for Tasks</h2><h3 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.1.BaseBatchModeCLI">2.1. Base BatchMode CLI</h3><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.1.1.BatchModeCommandArguments:">2.1.1. BatchMode Command Arguments: </h4><p><em>(The following arguments are fundamental to all Batch Mode executions.)</em></p><div class="panel" style="background-color: #EAE6FF;border-color: #998DD9;border-width: 1px;"><div class="panelContent" style="background-color: #EAE6FF;">
<p>Please note that the <strong>Base BatchMode CLI </strong>is included by default in each of the following tasks.</p>
</div></div><ul><li><p><strong>Unity Editor Filepath</strong></p><ul><li><p>Purpose: To specify the executable file of the Unity Editor version corresponding to the project.</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2DprojectPath%20%3Cpathname%3E,it%20in%20quotes." rel="nofollow"><strong>-projectPath {Project Filepath}</strong></a></p><ul><li><p>Purpose: To define the file path of the project where Batch Mode will be executed.</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=to%20compiler%20errors.-,%2Dbatchmode,one.%20To%20force%20a%20different%20platform%2C%20use%20the%20%2DbuildTarget%20option.,-%E2%80%91ignorecompilererrors" rel="nofollow"><strong>-batchmode</strong></a></p><ul><li><p>Purpose: To enable Batch Mode, allowing Unity to run without a graphical user interface (GUI).</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2DlogFile%20%3Cpathname%3E,%2DupmLogFile." rel="nofollow"><strong>-logFile {logFilePath}</strong></a></p><ul><li><p>Purpose: To set the desired log file path to record execution logs, which DevOps engineers can use for monitoring or debugging purposes.</p></li><li><p><em>For the purpose of Batch mode execution, the log file path is different.</em></p></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.1.2.Example(TradesElectricalProjectonJenkinsServer)">2.1.2. Example (Trades Electrical Project on Jenkins Server)</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/home/jenkins-ubuntu-dev-test/Unity/Hub/Editor/2022.3.6f1/Editor/Unity \
-projectPath /var/lib/jenkins/workspace/Trades-Electrical/Trades-Electrical-Pull-Request/Unity_Project \
-batchmode \
-logFile /var/lib/jenkins/workspace/Trades-Electrical/Trades-Electrical-Pull-Request/PRJob/TE-826-Organize-Feedback-Displayed-In-Supervisor-Feedback/batchmode_results/batch_mode_execution.log</pre>
</div></div><p /><hr /><h3 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.EditMode&amp;PlayModeTest(MostComplicateandImportant)">2.2. EditMode &amp; PlayMode Test (Most Complicate and Important)</h3><ul><li><p>Unity Packages Involved: <code>Test Framework</code>, <code>Code Coverage</code></p></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.1.BatchModeCommandArgumentsfromUnityCLI:">2.2.1. BatchMode Command Arguments from Unity CLI:</h4><h5 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.1.1EditMode">2.2.1.1 EditMode</h5><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2Dnographics,%2DlogFile." rel="nofollow">-nographics</a></p><ul><li><p>Purpose: To disable the graphical rendering in Unity for resource efficiency</p></li></ul></li></ul><h5 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.1.2PlayMode">2.2.1.2 PlayMode</h5><ul><li><p><code>/usr/bin/xvfb-run -a</code></p><ul><li><p>Purpose: The WebGL build process in Batch Mode relies on <strong>Xvfb (X Virtual Framebuffer) </strong>to simulate a display environment.</p></li><li><p><strong><span data-colorid="ut4n3ph65p">Important Note</span></strong>: Using <strong>-nographics</strong> in PlayMode may cause tests to not run properly.</p></li><li><p>Past Relevant Issues and Solutions:</p><ul><li><p>With the &lsquo;<code>-nographics</code>&rsquo; argument</p><ul><li><p><a class="external-link" data-card-appearance="inline" href="https://bitbucket.org/VARLab/devops-linux-jenkins/pull-requests/30" rel="nofollow">https://bitbucket.org/VARLab/devops-linux-jenkins/pull-requests/30</a> </p></li><li><p><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="attachments/1656913959/1684668427.xml" data-nice-type="XML File" data-file-src="/wiki/download/attachments/1656913959/PlayMode-results.xml?version=1&amp;modificationDate=1741799013303&amp;cacheVersion=1&amp;api=v2" data-linked-resource-id="1684668427" data-linked-resource-type="attachment" data-linked-resource-container-id="1656913959" data-linked-resource-default-alias="PlayMode-results.xml" data-mime-type="text/xml" data-has-thumbnail="true" data-linked-resource-version="1" data-media-id="798b6b91-8955-4ae1-9575-86f72389f80d" data-media-type="file"><img src="attachments/thumbnails/1656913959/1684668427" height="250"/></a></span> <span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="attachments/1656913959/1685159948.log" data-nice-type="null" data-file-src="/wiki/download/attachments/1656913959/PlayMode-tests.log?version=1&amp;modificationDate=1741799013394&amp;cacheVersion=1&amp;api=v2" data-linked-resource-id="1685159948" data-linked-resource-type="attachment" data-linked-resource-container-id="1656913959" data-linked-resource-default-alias="PlayMode-tests.log" data-mime-type="binary/octet-stream" data-has-thumbnail="true" data-linked-resource-version="1" data-media-id="a409a8c8-c4d8-4217-961a-27bb65462620" data-media-type="file"><img src="attachments/thumbnails/1656913959/1685159948" height="250"/></a></span></p></li></ul></li><li><p><code>WaitForEndOfFrame</code> function used in the test code script</p><ul><li><p><a class="external-link" data-card-appearance="inline" href="https://docs.unity3d.com/Packages/com.unity.test-framework%401.4/changelog/CHANGELOG.html#:~:text=Fixed%20an%20issue%20where%20batchmode%20test%20runs%20would%20never%20finish%20if%20a%20test%20yielded%20WaitForEndOfFrame%20(DSTR%2D1009)." rel="nofollow">https://docs.unity3d.com/Packages/com.unity.test-framework%401.4/changelog/CHANGELOG.html#:~:text=Fixed%20an%20issue%20where%20batchmode%20test%20runs%20would%20never%20finish%20if%20a%20test%20yielded%20WaitForEndOfFrame%20(DSTR%2D1009).</a> </p></li></ul></li></ul></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.2.BatchModeCommandArgumentsfromTestFrameworkPackage:">2.2.2. BatchMode Command Arguments from Test Framework Package:</h4><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.test-framework@1.4/manual/reference-command-line.html#:~:text=launcher/hub%20history.-,runTests,Runs%20tests%20in%20the%20Project.,-testCategory" rel="nofollow">-runTests</a></p><ul><li><p>Purpose: To run tests in the Project.</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.test-framework@1.4/manual/reference-command-line.html#:~:text=MethodName%5C(Param1%2CParam2%5C)%22-,testPlatform,value%20is%20specified%20for%20this%20argument%2C%20tests%20run%20in%20Edit%20Mode.,-assemblyNames" rel="nofollow">-testPlatform {Target-Test}</a></p><ul><li><p>Purpose: To specify the type of test for the project</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.test-framework@1.4/manual/reference-command-line.html#:~:text=firstAssembly%3BsecondAssembly%22.-,testResults,a%20problem%20is%20the%20content%20of%20error%20messages%20and%20stack%20traces.,-playerHeartbeatTimeout" rel="nofollow">-testResults {Test-Result-FilePath}</a></p><ul><li><p>Purpose: To set the test result file path to record the test result in XML file format </p></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.3.BatchModeCommandArgumentsfromCodeCoveragePackage:">2.2.3. BatchMode Command Arguments from Code Coverage Package:</h4><div class="panel" style="background-color: #EAE6FF;border-color: #998DD9;border-width: 1px;"><div class="panelContent" style="background-color: #EAE6FF;">
<p>The arguments are used under section 2.2.3. can be compared with the <strong>Code Coverage Settings </strong>in the Unity Editor. For examples of Code Coverage, you can refer to the following link: <a data-card-appearance="inline" href="https://varlab-dev.atlassian.net/wiki/spaces/VAR/pages/1681489929/EditMode+PlayMode+Code+Coverage+and+WebGL+Build#5.2.-Code-Coverage-Setting-and-Reports" rel="nofollow">https://varlab-dev.atlassian.net/wiki/spaces/VAR/pages/1681489929/EditMode+PlayMode+Code+Coverage+and+WebGL+Build#5.2.-Code-Coverage-Setting-and-Reports</a> </p>
</div></div><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=%2DenableCodeCoverage%2C%20to%20enable%20code%20coverage." rel="nofollow">-enableCodeCoverage</a></p><ul><li><p>Purpose: Enables code coverage and allows access to the Coverage API.</p></li><li><p>Comparing to Unity Editor's Code Coverage Settings</p><ul><li><p>Equivalent to the &quot;<code>Enable Code Coverage</code>&quot; checkbox.</p></li></ul></li></ul></li><li><p>-<a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#generate-combined-report-from-separate-projects:~:text=Note%3A%20%2DdebugCodeOptimization%20is%20passed%20above%20to%20ensure%20Code%20optimization%20is%20set%20to%20Debug%20mode.%20See%20Using%20Code%20Coverage%20with%20Code%20Optimization." rel="nofollow">debugCodeOptimization</a></p><ul><li><p> Purpose: Enables debug code optimization mode, overriding the current default code optimization mode for the session.</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=%2DcoverageResultsPath%20(optional)%2C%20to%20set%20the%20location%20where%20the%20coverage%20results%20and%20report%20are%20saved%20to.%20The%20default%20location%20is%20the%20project%27s%20path." rel="nofollow">-coverageResultsPath {DirectoryPath}</a></p><ul><li><p>Purpose: This argument, when specified during the execution of Batch Mode for tests, generates XML files in the designated coverageResultsPath directory, following the structure: <code>{ProjectName}-opencov/{TestMode}/</code>. These XML files are later used in the Code Coverage generation step to create HTML-formatted reports.</p></li><li><p>Example of Screenshot</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250311-180204.png" width="204" loading="lazy" src="attachments/1656913959/1681424402.png?width=204" data-image-src="attachments/1656913959/1681424402.png" data-height="157" data-width="204" data-unresolved-comment-count="0" data-linked-resource-id="1681424402" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250311-180204.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1656913959" data-linked-resource-container-version="12" data-media-id="a6e8f412-7c46-43a0-96f4-941a40dfa21f" data-media-type="file" /></span></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=%2DcoverageOptions%20(optional)%2C%20to%20pass%20extra%20options.%20Options%20are%20separated%20by%20semicolon.%20Some%20shells%20use%20semicolons%20to%20separate%20commands.%20Therefore%2C%20to%20ensure%20that%20coverage%20options%20are%20parsed%20correctly%2C%20enclose%20them%20in%20quotation%20marks." rel="nofollow">-coverageOptions</a></p><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=assemblyFilters,q7%2C%20etc." rel="nofollow">assemblyFilters</a></p><ul><li><p>Comparing to Unity Editor's Code Coverage Settings</p><ul><li><p>Equivalent to the &quot;<code>Included Assemblies</code>&quot; property and Its corresponding value.</p></li></ul></li><li><p>Purpose: Add this to specify the assemblies to include or exclude in the coverage calculation and/or report.</p></li><li><p>Past Relevant Issues:</p><ul><li><p>

    

            




    <span class="confluence-jim-macro jira-issue" data-jira-key="CORE-1462" data-client-id="SINGLE_a5997e8d-c92b-3e2c-a3c8-296b7f0f7c11_1656913959_712020:8a6d4980-1b7a-4890-950c-f5d8b8602cce">
                <a href="https://varlab-dev.atlassian.net/browse/CORE-1462" class="jira-issue-key"><span class="aui-icon aui-icon-wait issue-placeholder" />CORE-1462</a>
                    -
            <span class="summary">Getting issue details...</span>
                                    <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-default issue-placeholder">STATUS</span>
            </span>
 </p></li></ul></li><li><p><strong>VARLab Development Team's Convention </strong>:</p><ul><li><p><strong>Assets/Scripts Folder</strong>: Contains the code written by the team's developers and used in the project.</p></li><li><p><code>{fileName}.asmdef</code>: File in the Scripts folder that references the packages and libraries on which the code depends.</p></li><li><p>Example: In this case, the value is <code>assemblyFilters:VARLab.DLX</code> </p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250311-184253.png" width="415" loading="lazy" src="attachments/1656913959/1681555492.png?width=415" data-image-src="attachments/1656913959/1681555492.png" data-height="486" data-width="415" data-unresolved-comment-count="0" data-linked-resource-id="1681555492" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250311-184253.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1656913959" data-linked-resource-container-version="12" data-media-id="6f3d3669-3334-4b35-abb2-4841d5bec29e" data-media-type="file" /></span></li></ul></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#generate-combined-report-from-separate-projects:~:text=.-,sourcePaths,.,-assemblyFilters" rel="nofollow">sourcePaths</a></p><ul><li><p>Purpose: Uses the project folder's <code>DirectoryPath</code> as its value to allow the <strong>relative paths </strong>for the <code>pathFilters</code> (Included/Excluded Paths) to be utilized effectively.</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#generate-combined-report-from-separate-projects:~:text=pathFilters,MyClass_Q7.cs%2C%20etc." rel="nofollow">pathFilters</a></p><ul><li><p>Purpose: Add this to specify the paths that should be included or excluded in the coverage calculation and/or report.</p></li><li><p>Comparing to Unity Editor's Code Coverage Settings <strong>(including sourcePaths argument)</strong></p><ul><li><p><strong>sourcePaths value + &lsquo;+relative paths&rsquo;</strong></p><ul><li><p>Equivalent to the &quot;<code>Included Paths</code>&quot; property and Its corresponding values.</p></li><li><p><strong><span data-colorid="pskqin41c1">Important Note</span>: </strong>Even if the <strong>&quot;Included Paths&quot; </strong>property in the actual project's Code Coverage Settings has an empty value, failing to explicitly specify <code>/Assets/Scripts/</code> may result in unintended folders being included in the coverage scope. This can lead to discrepancies between the code coverage results generated via Unity Editor and the expected results, potentially causing misalignment with the development team's intention.</p></li></ul></li><li><p><strong>sourcePaths value + &lsquo;-relative paths&rsquo;</strong></p><ul><li><p>Equivalent to the &quot;<code>Excluded Paths</code>&quot; property and Its corresponding values.</p></li></ul></li></ul></li></ul></li></ul></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p>In the <strong>EditMode and PlayMode Test </strong>steps, you can execute tests in Batch Mode using the Base BatchMode CLI and the <code>-runTests</code>, <code>-testPlatform</code>, and <code>-testResults</code> arguments. This will also generate test results in XML format. However, to generate a Code Coverage Report in HTML format during the <strong>Code Coverage </strong>step, including the <code>-enableCodeCoverage</code> and <code>-coverageResultsPath</code> arguments provided by the <strong>Code Coverage Package is essential</strong>. Without these arguments, the Code Coverage Report cannot be generated.</p></div></div><p /><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.2.4.Example(TradesElectricalProjectonJenkinsServer)">2.2.4. Example (Trades Electrical Project on Jenkins Server)</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">//Base BatchMode CLI +
-enableCodeCoverage \
-debugCodeOptimization\
-coverageResultsPath /var/lib/jenkins/workspace/Trades-Electrical/Trades-Electrical-Pull-Request/PRJob/TE-826-Organize-Feedback-Displayed-In-Supervisor-Feedback/coverage_results \
-coverageOptions assemblyFilters:VARLab.TradesElectrical;sourcePaths:/var/lib/jenkins/workspace/Trades-Electrical/Trades-Electrical-Pull-Request/Unity_Project;pathFilters:+Assets/Scripts/**  \
-nographics</pre>
</div></div><p /><hr /><h3 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.CodeCoverageReports">2.3. Code Coverage Reports</h3><ul><li><p>Unity Packages Involved: <code>Code Coverage</code></p></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.1.Prerequisites">2.3.1. Prerequisites</h4><ul><li><p>XML files generated during the EditMode/PlayMode tests phase, located in:</p><ul><li><p><code>coverageResultsPath/{ProjectName}-opencov/EditMode</code></p></li><li><p><code>coverageResultsPath/{ProjectName}-opencov/PlayMode</code></p></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.1.BatchModeCommandArgumentsfromUnityCLI:">2.3.1. BatchMode Command Arguments from Unity CLI:</h4><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2Dnographics,%2DlogFile." rel="nofollow">-nographics</a></p><ul><li><p>Purpose: Same as EditMode/PlayMode Tests</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2Dquit,and%20become%20unresponsive." rel="nofollow">-quit</a></p><ul><li><p>Purpose: To quit the Unity Editor after other commands have finished executing.</p><ul><li><p><strong><span data-colorid="pk3g71qgl8">Important Note</span></strong>: When used in <strong>EditMode/PlayMode Tests</strong>, the <code>-quit</code> argument may cause the Unity Editor to terminate prematurely before the necessary files for Code Coverage are generated in the <code>coverageResultsPath/{ProjectName}-opencov</code> directory. As a result, it is not recommended to use <code>-quit</code> during the <strong>EditMode/PlayMode Tests </strong>phase.</p></li></ul></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.2.BatchModeCommandArgumentsfromCodeCoveragePackage:">2.3.2. BatchMode Command Arguments from Code Coverage Package:</h4><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=%2DcoverageResultsPath%20(optional)%2C%20to%20set%20the%20location%20where%20the%20coverage%20results%20and%20report%20are%20saved%20to.%20The%20default%20location%20is%20the%20project%27s%20path." rel="nofollow">-coverageResultsPath {DirectoryPath}</a></p><ul><li><p>Purpose: Specify the folder where the <strong>Code Coverage Report</strong> will be generated. This folder is used to create a new <code>Report</code><strong> </strong>directory inside the <code>coverageResultsPath</code>, which processes the XML files generated during the <strong>Test phase </strong>to produce the final Code Coverage Report.</p></li></ul></li><li><p>-enableCodeCoverage, -debugCodeOptimization</p><ul><li><p>Purpose: Same as EditMode/PlayMode Tests</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=%2DcoverageOptions%20(optional)%2C%20to%20pass%20extra%20options.%20Options%20are%20separated%20by%20semicolon.%20Some%20shells%20use%20semicolons%20to%20separate%20commands.%20Therefore%2C%20to%20ensure%20that%20coverage%20options%20are%20parsed%20correctly%2C%20enclose%20them%20in%20quotation%20marks." rel="nofollow">-coverageOptions</a></p><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#:~:text=assemblyFilters,q7%2C%20etc." rel="nofollow">assemblyFilters</a></p><ul><li><p>Purpose: Same as EditMode/PlayMode Tests</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#generate-combined-report-from-separate-projects:~:text=Description-,generateHtmlReport,.,-generateHtmlReportHistory" rel="nofollow">generateHtmlReport</a></p><ul><li><p>Purpose: To generate a coverage <a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/HowToInterpretResults.html" rel="nofollow">HTML report</a>.</p></li><li><p>Comparing to Unity Editor's Code Coverage Settings</p><ul><li><p>Equivalent to the &quot;<code>HTML Report</code>&quot; checkbox under the <code>Report Options</code></p></li></ul></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.2/manual/CoverageBatchmode.html#generate-combined-report-from-separate-projects:~:text=generateBadgeReport,and%20PNG%20format." rel="nofollow">generateBadgeReport</a></p><ul><li><p>Purpose: To generate coverage summary badges in SVG and PNG format.</p></li></ul></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.3.3.Example(TradesElectricalProjectonJenkinsServer)">2.3.3. Example (Trades Electrical Project on Jenkins Server)</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">//Base BatchMode CLI +
-enableCodeCoverage \
-debugCodeOptimization \
-coverageResultsPath /var/lib/jenkins/workspace/Trades-Electrical/Trades-Electrical-Pull-Request/PRJob/TE-826-Organize-Feedback-Displayed-In-Supervisor-Feedback/coverage_results \
-coverageOptions assemblyFilters:VARLab.TradesElectrical;generateHtmlReport;generateBadgeReport \
-nographics \
-quit</pre>
</div></div><p /><hr /><h3 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.WebGLBuild">2.4. WebGL Build</h3><ul><li><p>Unity Packages Involved: None</p></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.1.Prerequisites">2.4.1. Prerequisites</h4><ul><li><p>Install WebGL Support Module for the Unity Editor versions used for the Project</p><ul><li><p>If installation is needed, please refer to <a data-card-appearance="inline" href="https://varlab-dev.atlassian.net/wiki/spaces/VAR/pages/1681489929/EditMode+PlayMode+Code+Coverage+and+WebGL+Build#6.3.1.-Install-WebGL-Support-Module-for-the-Project" rel="nofollow">https://varlab-dev.atlassian.net/wiki/spaces/VAR/pages/1681489929/EditMode+PlayMode+Code+Coverage+and+WebGL+Build#6.3.1.-Install-WebGL-Support-Module-for-the-Project</a></p></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.2.TechInvolved:Xvfb(VirtualFramebuffer)">2.4.2. Tech Involved: Xvfb (Virtual Framebuffer)</h4><ul><li><p><code>/usr/bin/xvfb-run -a</code></p><ul><li><p>Purpose: The WebGL build process in Batch Mode relies on <strong>Xvfb (X Virtual Framebuffer) </strong>to simulate a display environment. This is necessary for running Unity in headless mode on servers or machines without a physical display. If you&rsquo;d like to be interested in more information, please refer to <a data-card-appearance="inline" href="https://varlab-dev.atlassian.net/wiki/spaces/DPD/pages/1506443342/Running+Edit+and+Play+Modes+on+Headless+Linux#1.-Environment-Preparation" rel="nofollow">https://varlab-dev.atlassian.net/wiki/spaces/DPD/pages/1506443342/Running+Edit+and+Play+Modes+on+Headless+Linux#1.-Environment-Preparation</a> </p></li><li><p>Past Relevant Issues and Solutions: </p><ul><li><p>

    

            




    <span class="confluence-jim-macro jira-issue" data-jira-key="CORE-1545" data-client-id="SINGLE_a5997e8d-c92b-3e2c-a3c8-296b7f0f7c11_1656913959_712020:8a6d4980-1b7a-4890-950c-f5d8b8602cce">
                <a href="https://varlab-dev.atlassian.net/browse/CORE-1545" class="jira-issue-key"><span class="aui-icon aui-icon-wait issue-placeholder" />CORE-1545</a>
                    -
            <span class="summary">Getting issue details...</span>
                                    <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-default issue-placeholder">STATUS</span>
            </span>
</p></li><li><p><a class="external-link" data-card-appearance="inline" href="https://bitbucket.org/VARLab/devops-linux-jenkins/pull-requests/28" rel="nofollow">https://bitbucket.org/VARLab/devops-linux-jenkins/pull-requests/28</a>  </p></li></ul></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.3.BatchModeCommandArgumentsfromUnityCLI:">2.4.3. BatchMode Command Arguments from Unity CLI:</h4><ul><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2DbuildTarget%20%3Cname%3E,your%20target%20platform." rel="nofollow">-buildTarget WebGL</a></p><ul><li><p>Purpose: To ensure the project is built for the WebGL platform, which allows it to run in web browsers.</p></li></ul></li><li><p><a class="external-link" href="https://docs.unity3d.com/Manual/EditorCommandLineArguments.html#:~:text=%2DexecuteMethod%20%3CClassName.MethodName,defined%20as%20static." rel="nofollow">-executeMethod Builder.BuildWebGL</a></p><ul><li><p>Purpose: To execute the custom method `Builder.BuildWebGL` in a script.</p></li></ul></li><li><p>-quit</p><ul><li><p>Purpose: Same as Code Coverage Report Step</p></li></ul></li></ul><h4 id="UsingUnityBatchModeCLICommandsasDevOpsEngineer-2.4.4.Example(TradesElectricalProjectonJenkinsServer)">2.4.4. Example (Trades Electrical Project on Jenkins Server)</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">//Base BatchMode CLI +
-buildTarget WebGL \
-executeMethod Builder.BuildWebGL \
-quit</pre>
</div></div><p />
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1656913959/1681850385.png">image-20250311-180145.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1656913959/1681424402.png">image-20250311-180204.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1656913959/1681391654.png">image-20250311-184235.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1656913959/1681555492.png">image-20250311-184253.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1656913959/1684668427.xml">PlayMode-results.xml</a> (text/xml)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1656913959/1685159948.log">PlayMode-tests.log</a> (binary/octet-stream)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 27, 2025 13:36</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
