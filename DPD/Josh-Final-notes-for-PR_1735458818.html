<!DOCTYPE html>
<html>
    <head>
        <title>DevOps / Pipeline &amp; Deployment : Josh Final notes for PR</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps / Pipeline &amp; Deployment</a></span>
                            </li>
                                                    <li>
                                <span><a href="1179353439.html">DevOps / Pipeline &amp; Deployment Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Linux-Jenkins-Documents_1542455384.html">Linux Jenkins Documents</a></span>
                            </li>
                                                    <li>
                                <span><a href="Security-Management-on-VM_1584594948.html">Security Management on VM</a></span>
                            </li>
                                                    <li>
                                <span><a href="Jenkins-Script-Security_1709932545.html">Jenkins Script Security</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps / Pipeline &amp; Deployment : Josh Final notes for PR
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Joshua Moore</span>, last modified on Apr 05, 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>This page is going to cover what I cannot due to the PT contract ending, please use these notes in context of this PR: <a class="external-link" data-card-appearance="inline" href="https://bitbucket.org/VARLab/devops-linux-jenkins/pull-requests/46/overview" rel="nofollow">https://bitbucket.org/VARLab/devops-linux-jenkins/pull-requests/46/overview</a> </p><p>I ran into several issues over the course of removing the “problem” methods. A major one being we can not typically access the Jenkins Pipeline Utility methods from our groovy script outside of the pipeline context (for testing as an example)! I tried a couple solutions, sometimes alternate methods can be used (such as using “sh” to use shell script commands, however those can’t be unit tested without mocking out the “sh” usage), and ended up adding dependency injection. I debated between doing it per method(adding a parameter for the pipeline object per method), and for the file(a helper method we call in initialize environment to pass the object into a file/class level variable), and in my current iteration ended up doing it for the file using this method</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">def pipeline

/**
 * A helper method for accessing the pipeline object from within the groovy script, should
 * allow us to call Jenkins Utility methods such as findFile, writeJson etc.
 *
 * @param pipeline       The pipeline object
 */
void pipelineHelper(def pipeline){
    this.pipeline = pipeline
}</pre>
</div></div><p>This will allow us to now use Jenkins Utility Functions from within the groovy code, outside of the pipeline. For example if you need to test a method that uses a Jenkins Utility method (such as readFile, writeJson, etc) you can mock the pipeline object and pass it via dependency injection so you can still test the method!</p><p /><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 27, 2025 13:33</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
