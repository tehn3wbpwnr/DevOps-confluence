<!DOCTYPE html>
<html>
    <head>
        <title>DevOps / Pipeline &amp; Deployment : Send Build Status to Bitbucket PR Page</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps / Pipeline &amp; Deployment</a></span>
                            </li>
                                                    <li>
                                <span><a href="1179353439.html">DevOps / Pipeline &amp; Deployment Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="1575288834.html">CI/CD Pipeline</a></span>
                            </li>
                                                    <li>
                                <span><a href="Bitbucket-Cloud-API_1741258768.html">Bitbucket Cloud API</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps / Pipeline &amp; Deployment : Send Build Status to Bitbucket PR Page
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Chris Park</span>, last modified on Apr 16, 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style>[data-colorid=w1kbumjd35]{color:#4c9aff} html[data-color-mode=dark] [data-colorid=w1kbumjd35]{color:#004eb3}[data-colorid=z156m4sjum]{color:#006644} html[data-color-mode=dark] [data-colorid=z156m4sjum]{color:#99ffdd}[data-colorid=fgnsiot4cu]{color:#006644} html[data-color-mode=dark] [data-colorid=fgnsiot4cu]{color:#99ffdd}[data-colorid=pel5crx776]{color:#ff5630} html[data-color-mode=dark] [data-colorid=pel5crx776]{color:#cf2600}[data-colorid=ni0e47m3a3]{color:#ff5630} html[data-color-mode=dark] [data-colorid=ni0e47m3a3]{color:#cf2600}[data-colorid=m1d2bhzj0v]{color:#36b37e} html[data-color-mode=dark] [data-colorid=m1d2bhzj0v]{color:#4cc994}[data-colorid=lnm9x8z5jj]{color:#ff5630} html[data-color-mode=dark] [data-colorid=lnm9x8z5jj]{color:#cf2600}[data-colorid=kfk1ixbh7r]{color:#ff5630} html[data-color-mode=dark] [data-colorid=kfk1ixbh7r]{color:#cf2600}[data-colorid=m52bdx2e9k]{color:#006644} html[data-color-mode=dark] [data-colorid=m52bdx2e9k]{color:#99ffdd}</style> This documentation explains where, when, and how Jenkins <strong>sends build status to the Bitbucket PR page</strong> using the <strong>Bitbucket Cloud API</strong>.</p><hr /><h1 id="SendBuildStatustoBitbucketPRPage-[Contents]"><strong>[Contents]</strong></h1><style type="text/css">/*<![CDATA[*/
div.rbtoc1748352836822 {padding: 0px;}
div.rbtoc1748352836822 ul {list-style: none;margin-left: 0px;}
div.rbtoc1748352836822 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1748352836822">
<ul class="toc-indentation">
<li><a href="#SendBuildStatustoBitbucketPRPage-[Contents]">[Contents]</a></li>
<li><a href="#SendBuildStatustoBitbucketPRPage-1.ThefeaturesofeachPRandDeploymentbuildstatus">1. The features of each PR and Deployment build status</a>
<ul class="toc-indentation">
<li><a href="#SendBuildStatustoBitbucketPRPage-1.2PRBuildStatus">1.2 PR Build Status</a></li>
<li><a href="#SendBuildStatustoBitbucketPRPage-1.2DeploymentBuildStatus">1.2 Deployment Build Status</a></li>
</ul>
</li>
<li><a href="#SendBuildStatustoBitbucketPRPage-2.WhenJenkinssendtheBitbucketstatus?">2. When Jenkins send the Bitbucket status?</a></li>
<li><a href="#SendBuildStatustoBitbucketPRPage-3.HowJenkinssendtheBitbucketstatus?">3. How Jenkins send the Bitbucket status?</a>
<ul class="toc-indentation">
<li><a href="#SendBuildStatustoBitbucketPRPage-3.1PathParameters">3.1 Path Parameters</a>
<ul class="toc-indentation">
<li><a href="#SendBuildStatustoBitbucketPRPage-ParameterName">Parameter Name</a></li>
</ul>
</li>
<li><a href="#SendBuildStatustoBitbucketPRPage-3.2Header">3.2 Header</a>
<ul class="toc-indentation">
<li><a href="#SendBuildStatustoBitbucketPRPage-Header">Header</a></li>
</ul>
</li>
<li><a href="#SendBuildStatustoBitbucketPRPage-3.3RequestBody(application/json)">3.3 Request Body (application/json)</a>
<ul class="toc-indentation">
<li><a href="#SendBuildStatustoBitbucketPRPage-ParameterName.1">Parameter Name</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#SendBuildStatustoBitbucketPRPage-4.HowtoSubmitBitbucketBuildStatusAPICallsfromJenkins?">4. How to Submit Bitbucket Build Status API Calls from Jenkins?</a></li>
</ul>
</div><hr /><h1 id="SendBuildStatustoBitbucketPRPage-1.ThefeaturesofeachPRandDeploymentbuildstatus">1. The features of each PR and Deployment build status</h1><p>: Jenkins currently sends<strong> two types of build status</strong>: PR and Deployment. Each serves a different features and includes a distinct description.</p><h2 id="SendBuildStatustoBitbucketPRPage-1.2PRBuildStatus"><strong>1.2 PR Build Status</strong></h2><p>: This status indicates whether the PR branch passes all the pipeline stages such as linting, unit test or WebGL building.</p><div class="table-wrap"><table data-table-width="760" data-layout="center" data-local-id="5d1075e7-2453-4562-badf-3e9e327193c4" class="confluenceTable"><tbody><tr><th data-highlight-colour="#ffffff" class="confluenceTh"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250409-172358.png" width="199" loading="lazy" src="attachments/1740865555/1741062161.png?width=199" data-image-src="attachments/1740865555/1741062161.png" data-height="46" data-width="186" data-unresolved-comment-count="0" data-linked-resource-id="1741062161" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250409-172358.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="a17601cb-f1c6-404a-bb72-d13994a44280" data-media-type="file" /></span></th></tr></tbody></table></div><p>&gt;&gt; A status of  '<strong><span data-colorid="m1d2bhzj0v">SUCCESSFUL</span></strong>' message refers PR branch pass all the tests successfully. <br />&gt;&gt; A status of '<strong><span data-colorid="ni0e47m3a3">FAILURE</span></strong>' refers PR branch has one or more test failure.<br /></p><h2 id="SendBuildStatustoBitbucketPRPage-1.2DeploymentBuildStatus"><strong>1.2 Deployment Build Status</strong></h2><p>: The deployment build status reflects whether the latest version of the main project has been successfully deployed to the target platform, such as <em><strong>eConestoga</strong></em><strong> </strong>or <em><strong>Azure Container Apps</strong></em>.</p><p> To proceed with deployment, the project must pass all tests. If any tests fail, Jenkins will skip the deployment and send a <strong>'<span data-colorid="kfk1ixbh7r">FAILURE</span>'</strong> status to Bitbucket.</p><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="bb5edcac-4292-41b1-a29b-2ee060eb4ffe" class="confluenceTable"><tbody><tr><th data-highlight-colour="#ffffff" class="confluenceTh"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250409-174108.png" width="214" loading="lazy" src="attachments/1740865555/1741127699.png?width=214" data-image-src="attachments/1740865555/1741127699.png" data-height="40" data-width="214" data-unresolved-comment-count="0" data-linked-resource-id="1741127699" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250409-174108.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="27eb1fba-d546-40e0-a165-32828f428ee6" data-media-type="file" /></span></th><th data-highlight-colour="#ffffff" class="confluenceTh"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250409-174157.png" width="304" loading="lazy" src="attachments/1740865555/1741127711.png?width=304" data-image-src="attachments/1740865555/1741127711.png" data-height="34" data-width="280" data-unresolved-comment-count="0" data-linked-resource-id="1741127711" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250409-174157.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="26e17a7d-b76a-4495-bd7e-db13d24e3314" data-media-type="file" /></span></th></tr></tbody></table></div><p> Additionally, the behavior of the deployment status message differs between the Unity and Web development pipelines.</p><ul><li><p><strong>Unity Projects</strong><br />For Unity projects, Jenkins will simply send the <strong>'<span data-colorid="z156m4sjum">SUCCESSFUL</span>'</strong> status when the WebGL build is successfully deployed to the <code>dlx-econstoga</code> server.</p></li><li><p><strong>Web Development Projects</strong><br />For Web development projects, the deployment build status is marked as <strong>'<span data-colorid="m52bdx2e9k">SUCCESSFUL</span>'</strong> when container versions are deployed successfully.</p></li></ul><p /><hr /><h1 id="SendBuildStatustoBitbucketPRPage-2.WhenJenkinssendtheBitbucketstatus?"><strong>2. When Jenkins send the Bitbucket status?</strong></h1><p>Jenkins sends the build status two times in general.</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="화면 캡처 2025-04-09 160026-20250409-200216.png" width="760" loading="lazy" src="attachments/1740865555/1741815814.png?width=760" data-image-src="attachments/1740865555/1741815814.png" data-height="194" data-width="1375" data-unresolved-comment-count="0" data-linked-resource-id="1741815814" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="화면 캡처 2025-04-09 160026-20250409-200216.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="1c7c5548-9704-4147-b742-5306516fa516" data-media-type="file" /></span><ol start="1"><li><p><strong>After the prepare workspace</strong><br />: Send '<strong><span data-colorid="w1kbumjd35">INPROGRESS</span></strong>' status to Bitbucket through <code>generalUtil.initializeEnvironment()</code></p></li><li><p><strong>At the end of the pipeline build</strong><br />: Send <strong>'<span data-colorid="fgnsiot4cu">SUCCESSFUL</span>'</strong> or '<strong><span data-colorid="pel5crx776">FAILURE</span></strong>' based on the build result through <code>generalUtil.sendBuildStatus()</code></p></li></ol><p /><hr /><h1 id="SendBuildStatustoBitbucketPRPage-3.HowJenkinssendtheBitbucketstatus?"><strong>3. How Jenkins send the Bitbucket status?</strong></h1><p>: Jenkins sends an <strong>HTTP PUT request</strong> using the Bitbucket Cloud API to update the build status.</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p>This document refers to the <strong>Bitbucket Cloud API for updating build status</strong>:<br /><a class="external-link" data-card-appearance="inline" href="https://developer.atlassian.com/cloud/bitbucket/rest/api-group-commit-statuses/#api-repositories-workspace-repo-slug-commit-commit-statuses-build-key-put" rel="nofollow">https://developer.atlassian.com/cloud/bitbucket/rest/api-group-commit-statuses/#api-repositories-workspace-repo-slug-commit-commit-statuses-build-key-put</a> </p></div></div><h2 id="SendBuildStatustoBitbucketPRPage-3.1PathParameters"><strong>3.1 Path Parameters</strong></h2><p>: These are the parameters that must be included in the request URL. Each parameter is explained in the table below.</p><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="cf4fec64-abc1-4637-bfdb-9f3c90e1175e" class="confluenceTable"><colgroup><col style="width: 163.0px;" /><col style="width: 322.0px;" /><col style="width: 271.0px;" /></colgroup><tbody><tr><th data-highlight-colour="#f4f5f7" class="confluenceTh"><h4 style="text-align: center;" id="SendBuildStatustoBitbucketPRPage-ParameterName"><strong>Parameter Name</strong></h4></th><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Description</strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Example</strong></p></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>commit</code></p></th><td class="confluenceTd"><p style="text-align: center;">The full commit hash for which Jenkins sends the build status.</p><p style="text-align: center;">This commit hash is tracked by Jenkins in <code>env.COMMIT_HASH</code></p></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250409-205802.png" width="246" loading="lazy" src="attachments/1740865555/1742110753.png?width=246" data-image-src="attachments/1740865555/1742110753.png" data-height="134" data-width="423" data-unresolved-comment-count="0" data-linked-resource-id="1742110753" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250409-205802.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="a8e718b6-9038-442f-b6f9-47c6fa7cb9c1" data-media-type="file" /></span><p style="text-align: center;" /></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>key</code></p></th><td class="confluenceTd"><p style="text-align: center;">This property should be an <strong>unique value</strong>.</p><p style="text-align: center;">Jenkins passes its <strong>build number</strong> as a <code>key</code> value.</p></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250410-140338.png" width="186" loading="lazy" src="attachments/1740865555/1743192067.png?width=186" data-image-src="attachments/1740865555/1743192067.png" data-height="41" data-width="186" data-unresolved-comment-count="0" data-linked-resource-id="1743192067" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250410-140338.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="207f5535-7e18-4b74-a934-1ee4b27f0129" data-media-type="file" /></span><p /></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>repo_slug</code></p></th><td class="confluenceTd"><p style="text-align: center;">This refers the name of repository.</p></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250410-141055.png" width="254" loading="lazy" src="attachments/1740865555/1743224836.png?width=254" data-image-src="attachments/1740865555/1743224836.png" data-height="100" data-width="524" data-unresolved-comment-count="0" data-linked-resource-id="1743224836" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250410-141055.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="041c2733-f261-4b41-b6bd-b74370d6cb5e" data-media-type="file" /></span><p /></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>workspace</code></p></th><td class="confluenceTd"><p style="text-align: center;">This refers the name of workspace which repository belongs to</p><p style="text-align: center;">Jenkins uses <code>env.JOB_REPO</code>which is the combination of <code>workspace/repo_slug</code>.</p></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250410-141112.png" width="254" loading="lazy" src="attachments/1740865555/1742962693.png?width=254" data-image-src="attachments/1740865555/1742962693.png" data-height="100" data-width="524" data-unresolved-comment-count="0" data-linked-resource-id="1742962693" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250410-141112.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="47a95350-24a3-4302-9161-a66901842cfc" data-media-type="file" /></span><p /></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><strong>Example URL</strong></p></th><td colspan="2" class="confluenceTd"><p><code>https://api.bitbucket.org/2.0/repositories/{workspace}/{repo_slug}/commit/{commit}/statuses/build/{key}</code></p></td></tr></tbody></table></div><p /><h2 id="SendBuildStatustoBitbucketPRPage-3.2Header"><strong>3.2 Header </strong></h2><p>: This header configuration ensures that Bitbucket API requests are sent and received in JSON format, with the required <strong>Bitbucket Access Token</strong> (stored in <code>env.BITBUCKET_ACCESS_TOKEN</code>) included for authorization.</p><p> It sets &quot;<code>Accept</code>&quot; and &quot;<code>Content-Type</code><strong>&quot;</strong> to &quot;<code>application/json</code>&quot; and prepends &quot;<code>Bearer </code>&quot; to the token in the &quot;Authorization&quot; field.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p>Please be cautious of &lsquo;<strong>WHITE SPACE</strong>' after the '<strong>Bearer </strong>'</p></div></div><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="bc032239-f5cc-45b4-a2b3-e019ec4441c4" class="confluenceTable"><colgroup><col style="width: 163.0px;" /><col style="width: 322.0px;" /></colgroup><tbody><tr><th colspan="2" class="confluenceTh"><h4 style="text-align: center;" id="SendBuildStatustoBitbucketPRPage-Header"><strong>Header</strong></h4></th></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>Accept</code></p></th><td class="confluenceTd"><p style="text-align: center;"><code>application/json</code></p></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>Content-Type</code></p></th><td class="confluenceTd"><p style="text-align: center;"><code>application/json</code></p></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>Authorization</code></p></th><td class="confluenceTd"><p style="text-align: center;"><strong>Bitbucket Access Token</strong> is required for this field.</p><p style="text-align: center;">Bitbucket Access Token is stored by Jenkins as an <code>env.BITBUCKET_ACCESS_TOKEN</code></p></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><strong>Example Header</strong></p></th><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: py; gutter: false; theme: Confluence" data-theme="Confluence">headers = {
    &quot;Accept&quot;: &quot;application/json&quot;,
    &quot;Content-Type&quot;: &quot;application/json&quot;,
    &quot;Authorization&quot;: &quot;Bearer &quot; + access_token
}</pre>
</div></div></td></tr></tbody></table></div><p /><h2 id="SendBuildStatustoBitbucketPRPage-3.3RequestBody(application/json)"><strong>3.3 Request Body (</strong><code>application/json</code><strong>)</strong></h2><p>: This content includes fields only that are using in our pipeline. Please review the Bitbucket Cloud API if you want to check all possible fields in this <a class="external-link" href="https://developer.atlassian.com/cloud/bitbucket/rest/api-group-commit-statuses/#api-repositories-workspace-repo-slug-commit-commit-statuses-build-key-put" rel="nofollow"><strong><u>PUT: Update a build status for a commit</u></strong></a><strong><u>.</u></strong></p><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="da54f9ec-ee77-4398-a8df-6fcc5902991e" class="confluenceTable"><colgroup><col style="width: 113.0px;" /><col style="width: 301.0px;" /><col style="width: 82.0px;" /><col style="width: 86.0px;" /><col style="width: 89.0px;" /><col style="width: 75.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><h4 style="text-align: center;" id="SendBuildStatustoBitbucketPRPage-ParameterName.1"><strong>Parameter Name</strong></h4></th><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Description</strong></p></td><td data-highlight-colour="#f4f5f7" colspan="4" class="confluenceTd"><p style="text-align: center;"><strong>Example</strong></p></td></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>key</code></p></th><td class="confluenceTd"><p>The same <code>key</code> field mentioned in <u>3.1 Path Parameters</u> which is 'build number&rsquo; of Jenkins job.</p></td><td colspan="4" class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250410-140338.png" width="238" loading="lazy" src="attachments/1740865555/1743192067.png?width=238" data-image-src="attachments/1740865555/1743192067.png" data-height="41" data-width="186" data-unresolved-comment-count="0" data-linked-resource-id="1743192067" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250410-140338.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="207f5535-7e18-4b74-a934-1ee4b27f0129" data-media-type="file" /></span></td></tr><tr><th rowspan="2" class="confluenceTh"><p style="text-align: center;"><code>state</code></p></th><td class="confluenceTd"><p>The build status of PR or Deployment build.</p></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250414-182402.png" width="66" loading="lazy" src="attachments/1740865555/1748533307.png?width=66" data-image-src="attachments/1740865555/1748533307.png" data-height="33" data-width="102" data-unresolved-comment-count="0" data-linked-resource-id="1748533307" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250414-182402.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="0458c1bf-05c0-4199-b91f-ca989fac0184" data-media-type="file" /></span><p /></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250414-182047.png" width="79" loading="lazy" src="attachments/1740865555/1749024822.png?width=79" data-image-src="attachments/1740865555/1749024822.png" data-height="37" data-width="79" data-unresolved-comment-count="0" data-linked-resource-id="1749024822" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250414-182047.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="586dd042-d37a-43a8-8809-a352399c22a3" data-media-type="file" /></span></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250414-182239.png" width="80" loading="lazy" src="attachments/1740865555/1748959310.png?width=80" data-image-src="attachments/1740865555/1748959310.png" data-height="32" data-width="88" data-unresolved-comment-count="0" data-linked-resource-id="1748959310" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250414-182239.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="8be6cb6f-832d-4b90-be14-85e4b9319282" data-media-type="file" /></span><p /></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250414-182251.png" width="69" loading="lazy" src="attachments/1740865555/1748435004.png?width=69" data-image-src="attachments/1740865555/1748435004.png" data-height="40" data-width="104" data-unresolved-comment-count="0" data-linked-resource-id="1748435004" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250414-182251.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="143f95f6-f25c-4d14-89d6-1189cda14079" data-media-type="file" /></span><p /></td></tr><tr><th data-highlight-colour="#ffffff" colspan="5" class="confluenceTh"><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p>The options are <code>['SUCCESSFUL', 'FAILED', 'STOPPED', 'INPROGRESS']</code></p></div></div></th></tr><tr><th rowspan="2" class="confluenceTh"><p style="text-align: center;"><code>url</code></p></th><td class="confluenceTd"><p>The URL that linked on the key (build number) field.</p></td><td colspan="4" class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250414-182715.png" width="313" loading="lazy" src="attachments/1740865555/1748828235.png?width=313" data-image-src="attachments/1740865555/1748828235.png" data-height="385" data-width="1266" data-unresolved-comment-count="0" data-linked-resource-id="1748828235" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250414-182715.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="8d143518-0c51-473b-a089-1e4d52f7794b" data-media-type="file" /></span><p /></td></tr><tr><th data-highlight-colour="#ffffff" colspan="5" class="confluenceTh"><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon" /><div class="confluence-information-macro-body"><p>Currently, <strong>it redirect to the associated Jenkins build status overview</strong>. </p></div></div></th></tr><tr><th class="confluenceTh"><p style="text-align: center;"><code>description</code></p></th><td class="confluenceTd"><p>The message of build status.</p><p /></td><td colspan="4" class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20250414-181104.png" width="224" loading="lazy" src="attachments/1740865555/1748926538.png?width=224" data-image-src="attachments/1740865555/1748926538.png" data-height="39" data-width="170" data-unresolved-comment-count="0" data-linked-resource-id="1748926538" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20250414-181104.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1740865555" data-linked-resource-container-version="7" data-media-id="3075f42e-937f-4388-ab30-a1c711ff3cbd" data-media-type="file" /></span></td></tr></tbody></table></div><p /><hr /><h1 id="SendBuildStatustoBitbucketPRPage-4.HowtoSubmitBitbucketBuildStatusAPICallsfromJenkins?">4. How to Submit Bitbucket Build Status API Calls from Jenkins?</h1><p>: <strong>Jenkins </strong>sends the Bitbucket build status using <code>python/send_build_bitbucket_status.py</code>, which is invoked by the <code>sendBuildStatus()</code> function defined in <code>groovy/generalHelper.groovy</code>.</p><p>Here is the table for structure explanation:</p><div class="table-wrap"><table data-table-width="1186" data-layout="center" data-local-id="2d23a3f2-80b3-4470-bdbf-acf74eb68f6d" class="confluenceTable"><colgroup><col style="width: 257.0px;" /><col style="width: 194.0px;" /><col style="width: 379.0px;" /><col style="width: 352.0px;" /></colgroup><tbody><tr><th class="confluenceTh"><p><strong>File Path</strong></p></th><th class="confluenceTh"><p><strong>Method Name</strong></p></th><th class="confluenceTh"><p><strong>Parameters</strong></p></th><th class="confluenceTh"><p><strong>Environment Variables</strong></p></th></tr><tr><td class="confluenceTd"><p><code>python/</code><br /><code>send_build_bitbucket_status.py</code></p></td><td class="confluenceTd"><p>None</p></td><td class="confluenceTd"><p><code>pr-commit</code>: Full Commit Hash</p><p><code>pr-status</code>: Build Status</p><p><code>-d/--deployment</code>: True for deployment build</p><p><code>-desc/--description</code>: Description for build result</p></td><td class="confluenceTd"><p><code>BITBUCKET_ACCESS_TOKEN</code>: Credential of repository access token.</p><p><code>JOB_REPO</code>: PR repository name</p><p><code>BUILD_ID</code>: Current build number</p><p><code>BUILD_URL</code>: URL of current build overview</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><code>groovy/</code><br /><code>generalHelper.groovy</code></p></td><td rowspan="2" class="confluenceTd"><p><code>void sendBuildStatus()</code></p><p><span data-colorid="lnm9x8z5jj">*Function Overloaded*</span></p></td><td class="confluenceTd"><p><code>String workspace</code>: Jenkins workspace.</p><p><code>String state</code>: Build status.<br /></p><p><code>String commitHash</code>: Full commit hash.</p><p><code>Boolean deployment = false</code>: Pass true in deployment pipeline.</p></td><td class="confluenceTd"><p>&gt;&gt; Associated env: <code>env.WORKSPACE</code></p><p>&gt;&gt; Available List: <code>['SUCCESSFUL', 'FAILED', 'STOPPED', 'INPROGRESS']</code></p><p>&gt;&gt; Associated env: <code>env.COMMIT_HASH</code></p></td></tr><tr><td class="confluenceTd"><p><code>String workspace</code>: Jenkins workspace</p><p><code>String state</code>: Build status.<br /></p><p><code>String description</code>: Description that Jenkins wants to deliver to Bitbucket.</p><p><code>String commitHash</code>: Full commit hash.</p></td><td class="confluenceTd"><p>&gt;&gt; Associated env: <code>env.WORKSPACE</code></p><p>&gt;&gt; Available List: <code>['SUCCESSFUL', 'FAILED', 'STOPPED', 'INPROGRESS']</code></p><p>&gt;&gt; Customizable description string</p><p><br />&gt;&gt; Associated env: <code>env.COMMIT_HASH</code></p></td></tr></tbody></table></div><p /><p />
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1741062161.png">image-20250409-172358.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1741127699.png">image-20250409-174108.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1741127705.png">image-20250409-174153.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1741127711.png">image-20250409-174157.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1741815814.png">화면 캡처 2025-04-09 160026-20250409-200216.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1742110753.png">image-20250409-205802.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1743192067.png">image-20250410-140338.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1743224836.png">image-20250410-141055.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1742962693.png">image-20250410-141112.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1749188681.png">image-20250414-181102.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1748926538.png">image-20250414-181104.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1749024822.png">image-20250414-182047.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1748959310.png">image-20250414-182239.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1748435004.png">image-20250414-182251.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1748533307.png">image-20250414-182402.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1740865555/1748828235.png">image-20250414-182715.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 27, 2025 13:33</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
