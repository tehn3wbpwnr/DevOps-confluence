<!DOCTYPE html>
<html>
    <head>
        <title>DevOps / Pipeline &amp; Deployment : VARLab DLX-LTI Webserver summary</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps / Pipeline &amp; Deployment</a></span>
                            </li>
                                                    <li>
                                <span><a href="1179353439.html">DevOps / Pipeline &amp; Deployment Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="DLX-Server-Documents_1541832718.html">DLX Server Documents</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps / Pipeline &amp; Deployment : VARLab DLX-LTI Webserver summary
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Joshua Moore</span>, last modified by <span class='editor'> Aaron Droese</span> on Aug 13, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p /><p style="text-align: center;">VAR Lab â€“ LTI Summary Document</p><p style="text-align: center;"> </p><p style="text-align: center;">Date: 2024-7-16</p><p><br/></p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1748352927773 {padding: 0px;}
div.rbtoc1748352927773 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1748352927773 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1748352927773'>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122539ProjectSummary'>Project Summary</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122540DLX(DigitalLearningExperience)Webserver'>DLX (Digital Learning Experience) Web server</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122541Supportsystems'>Support systems</a></li>
</ul>
</li>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122542TechnicalInformation'>Technical Information</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122543PortsandProtocols'>Ports and Protocols</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122544FeathersVMwithNGINX'>Feathers VM with NGINX</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122545WebDLXServer'>Web DLX Server</a></li>
</ul>
</li>
<li><a href='#VARLabDLX-LTIWebserversummary-_Toc172122546SystemDiagram'>System Diagram</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-LTIjsServerandLMSNetworkCommunicationDiagrams'>LTI js Server and LMS Network Communication Diagrams</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-SoftwareVersionNumbers'>Software Version Numbers</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-LTIServerVM'>LTI Server VM</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-NGINXServer'>NGINX Server</a></li>
</ul>
</li>
<li><a href='#VARLabDLX-LTIWebserversummary-CISRecommendationsforHardening'>CIS Recommendations for Hardening</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-Ubuntu20.04'>Ubuntu 20.04</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-CustomRuleExclusions'>Custom Rule Exclusions</a></li>
</ul>
</li>
<li><a href='#VARLabDLX-LTIWebserversummary-MongoDB'>MongoDB</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-NGINX'>NGINX</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-CISAudits+remediationstepstaken'>CIS Audits + remediation steps taken</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#VARLabDLX-LTIWebserversummary-MongoDB.1'>MongoDB</a>
<ul class='toc-indentation'>
<li><a href='#VARLabDLX-LTIWebserversummary-MongoDBAccount'>MongoDB Account</a></li>
<li><a href='#VARLabDLX-LTIWebserversummary-MongoDBProcesses'>MongoDB Processes</a></li>
</ul>
</li>
<li><a href='#VARLabDLX-LTIWebserversummary-AdditionalResources'>Additional Resources</a></li>
</ul>
</li>
</ul>
</div><p /><p><br/></p><h1 id="VARLabDLX-LTIWebserversummary-_Toc172122539ProjectSummary"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122539"><span class="confluence-anchor-link" id="_Toc172122539"></span></span>Project Summary</h1><p>The goal of our current project was to implement a remotely hosted web server, that could be accessed via an LMS (Learning Management System) such as eConestoga to host our virtual learning experiences, which will be hosted as Unity WebGL builds. To <span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Int_LygOVVbG"><span class="confluence-anchor-link" id="_Int_LygOVVbG"></span></span>accomplish this, we have created a web server using the ltijs<sup>1</sup> library which has been LTI Advantage certified by IMS<sup>1</sup></p><p /><p><sup>1 </sup>Library located here: <a class="external-link" href="https://github.com/Cvmcosta/ltijs" rel="nofollow">GitHub - Cvmcosta/ltijs: Turn your application into a fully integratable LTI 1.3 tool provider.</a></p><p><sup>2</sup> Link to certification webpage: <a class="external-link" href="https://site.imsglobal.org/certifications/coursekey/ltijs" rel="nofollow">Ltijs | 1EdTech (imsglobal.org)</a></p><h2 id="VARLabDLX-LTIWebserversummary-_Toc172122540DLX(DigitalLearningExperience)Webserver"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122540"><span class="confluence-anchor-link" id="_Toc172122540"></span></span>DLX (Digital Learning Experience) Web server</h2><p>We use a webserver hosted on a VM through Azure using Linux as the OS and using Express.js for the back-end server code. This uses the ltijs library for authorization and authentication when interacting with a request from an according LMS, which uses OAuth 2.0 and OpenID Connect. The associated URL with the server is webdlx.vconestoga.com, which if you try to reach without going through an LTI certified LMS will give you a 401 unauthorized error.</p><h2 id="VARLabDLX-LTIWebserversummary-_Toc172122541Supportsystems"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122541"><span class="confluence-anchor-link" id="_Toc172122541"></span></span>Support systems</h2><p>The webserver is reached through a NGINX HTTPS tunnel, redirecting the request to our internal network. A MongoDB database is also hosted on the same machine as the DLX web server to hold data related to the registered tools and LTI information.</p><p><br/></p><h1 id="VARLabDLX-LTIWebserversummary-_Toc172122542TechnicalInformation"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122542"><span class="confluence-anchor-link" id="_Toc172122542"></span></span>Technical Information</h1><h2 id="VARLabDLX-LTIWebserversummary-_Toc172122543PortsandProtocols"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122543"><span class="confluence-anchor-link" id="_Toc172122543"></span></span>Ports and Protocols</h2><h3 id="VARLabDLX-LTIWebserversummary-_Toc172122544FeathersVMwithNGINX"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122544"><span class="confluence-anchor-link" id="_Toc172122544"></span></span>Feathers VM with NGINX</h3><ol start="1"><li><p>Public</p><ol start="1"><li><p>IP: 20.151.179.147</p><ol start="1"><li><p>SSH on port 22</p></li><li><p>HTTPS traffic port 443</p></li><li><p>Domain: webdlx.vconestoga.com routes to Web DLX Server</p></li></ol></li></ol></li><li><p>Private</p><ol start="1"><li><p>IP:10.5.0.4</p><ol start="1"><li><p>Allow all internal traffic on port 3000 (HTTP)</p></li></ol></li></ol></li></ol><p /><h3 id="VARLabDLX-LTIWebserversummary-_Toc172122545WebDLXServer"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122545"><span class="confluence-anchor-link" id="_Toc172122545"></span></span>Web DLX Server</h3><ol start="1"><li><p>Public</p><ol start="1"><li><p>IP: 4.172.225.64 </p><ol start="1"><li><p>SSH on port 22</p></li><li><p>HTTP on port 80</p><ol start="1"><li><p>This is because this VM is currently a shared resource, this is open for an Apache server that is used to share builds internally with LEAD members</p></li></ol></li></ol></li></ol></li><li><p>Private</p><ol start="1"><li><p>IP:10.5.0.8</p><ol start="1"><li><p>Node on port 3000</p><ol start="1"><li><p>This is our Web DLX Server using express.</p></li></ol></li><li><p>MongoDB on port 27017</p></li></ol></li></ol></li></ol><p /><p><br/></p><h2 id="VARLabDLX-LTIWebserversummary-_Toc172122546SystemDiagram"><span class="confluence-anchor-link" id="VARLabDLX-LTIWebserversummary-_Toc172122546"><span class="confluence-anchor-link" id="_Toc172122546"></span></span>System Diagram</h2><p>: In the communication between Moodle and the server, after submitting the required authentication information to the server in an HTTP POST request, the server redirects to auth.php using the information stored in the database.<br/> The authentication process with Moodle (LMS) is carried out through OpenID Connect (OAuth 2.0). Once authentication is completed, an ltik is issued from the server (LTI.js), and subsequent requests are authenticated through ltik.<br/> After ltik is issued, the request is authenticated through ltik, and the data requested by Moodle is processed and returned by the server.</p><p style="text-align: center;"><strong>[External Tool Registration]</strong></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="Dynamic Registration Diagram (3)-20240723-191230.png" width="760" loading="lazy" src="attachments/1231421477/1237090339.png?width=760" data-image-src="attachments/1231421477/1237090339.png" data-height="2682" data-width="4086" data-unresolved-comment-count="0" data-linked-resource-id="1237090339" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Dynamic Registration Diagram (3)-20240723-191230.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1231421477" data-linked-resource-container-version="20" data-media-id="e54f0898-7652-479f-a513-1424fded13eb" data-media-type="file"></span><p /><p style="text-align: center;"><strong>[Deep-Link Process]</strong></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="Deep link process-20240722-020024.png" width="760" loading="lazy" src="attachments/1231421477/1233027086.png?width=760" data-image-src="attachments/1231421477/1233027086.png" data-height="3350" data-width="4086" data-unresolved-comment-count="0" data-linked-resource-id="1233027086" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Deep link process-20240722-020024.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1231421477" data-linked-resource-container-version="20" data-media-id="871be1e4-0da6-41f9-afbd-ab77a06dcdf2" data-media-type="file"></span><p style="text-align: center;"></p><p style="text-align: center;"><strong>[Content Providing Process]</strong></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="Blank board (1)-20240722-020029.png" width="760" loading="lazy" src="attachments/1231421477/1233059853.png?width=760" data-image-src="attachments/1231421477/1233059853.png" data-height="3224" data-width="4086" data-unresolved-comment-count="0" data-linked-resource-id="1233059853" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Blank board (1)-20240722-020029.png" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="1231421477" data-linked-resource-container-version="20" data-media-id="d03fe04d-ec9d-425b-a4ad-0edb17d66ea5" data-media-type="file"></span><p /><h2 id="VARLabDLX-LTIWebserversummary-LTIjsServerandLMSNetworkCommunicationDiagrams">LTI js Server and LMS Network Communication Diagrams</h2><p /><ol start="1"><li><p><a class="external-link" href="https://miro.com/app/board/uXjVKwIDFpM=/?share_link_id=374742336226" rel="nofollow">LMS and LTI js Server Network Communication Flow</a><br/><em><strong><u>(Please Click the link to see details of the diagram)</u></strong></em></p></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="Network Communication.jpg" width="760" loading="lazy" src="attachments/1231421477/1234468865.jpg?width=760" data-image-src="attachments/1231421477/1234468865.jpg" data-height="1087" data-width="919" data-unresolved-comment-count="0" data-linked-resource-id="1234468865" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Network Communication.jpg" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="1231421477" data-linked-resource-container-version="20" data-media-id="de74cd3c-3294-4a90-b3e8-4157c153f88c" data-media-type="file"></span><ol start="2"><li><p><a class="external-link" href="https://miro.com/app/board/uXjVKwP_kVI=/?share_link_id=748128614268" rel="nofollow">Tool Dynamic Registration Network Communication</a><br/><em><strong><u>(Please Click the link to see details of the diagram)</u></strong></em></p></li></ol><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="Network Communication for Dynamic LTI Tool Registration.jpg" width="760" loading="lazy" src="attachments/1231421477/1237254154.jpg?width=760" data-image-src="attachments/1231421477/1237254154.jpg" data-height="3544" data-width="4514" data-unresolved-comment-count="0" data-linked-resource-id="1237254154" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Network Communication for Dynamic LTI Tool Registration.jpg" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="1231421477" data-linked-resource-container-version="20" data-media-id="add4829a-265f-4c56-a121-aa0f58b01fc4" data-media-type="file"></span><p>   </p><ol start="3"><li><p><a class="external-link" href="https://miro.com/app/board/uXjVKwP9dqE=/?share_link_id=170017257484" rel="nofollow">Adding Content Network Communication</a><br/><em><strong><u>(Please Click the link to see details of the diagram)</u></strong></em></p></li></ol><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="Network Communication for Adding Content to a Course-20240723-143748.jpg" width="760" loading="lazy" src="attachments/1231421477/1237090320.jpg?width=760" data-image-src="attachments/1231421477/1237090320.jpg" data-height="2451" data-width="6525" data-unresolved-comment-count="0" data-linked-resource-id="1237090320" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Network Communication for Adding Content to a Course-20240723-143748.jpg" data-base-url="https://varlab-dev.atlassian.net/wiki" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="1231421477" data-linked-resource-container-version="20" data-media-id="bf6dd6dd-9caa-4391-9c7b-2301e9e71da6" data-media-type="file"></span><h2 id="VARLabDLX-LTIWebserversummary-SoftwareVersionNumbers">Software Version Numbers</h2><h3 id="VARLabDLX-LTIWebserversummary-LTIServerVM">LTI Server VM</h3><ul><li><p>Ubuntu 20.04.6 LTS</p></li><li><p>PM2 5.3.1</p></li><li><p>MongoDB 7.0.12</p></li><li><p>LTI js server dependencies</p><ul><li><p>dotenv: ^16.0.3</p></li><li><p>express: ^4.18.2</p></li><li><p>ltijs: ^5.9.1</p></li><li><p>mongodb: ^6.3.0</p></li><li><p>morgan: ^1.10.0</p></li><li><p>nodemon: 3.1.0</p></li><li><p>winston: ^3.11.0</p></li><li><p>winston-daily-rotate-file: ^4.7.1</p></li><li><p>Dev Dependencies</p><ul><li><p> Mocha: ^10.3.0</p></li></ul></li></ul></li></ul><h3 id="VARLabDLX-LTIWebserversummary-NGINXServer">NGINX Server</h3><ul><li><p>PM2 5.3.0</p></li><li><p>Ubuntu 20.04.6</p></li><li><p>NGINX nginx/1.18.0 (Ubuntu)</p></li></ul><p /><h2 id="VARLabDLX-LTIWebserversummary-CISRecommendationsforHardening">CIS Recommendations for Hardening</h2><p>As was recommended to us we have implemented the CIS recommendations for the following software components used in our solution.</p><p>Main CIS benchmarks website here: <a class="external-link" data-card-appearance="inline" href="https://www.cisecurity.org/cis-benchmarks" rel="nofollow">https://www.cisecurity.org/cis-benchmarks</a> </p><h3 id="VARLabDLX-LTIWebserversummary-Ubuntu20.04">Ubuntu 20.04</h3><p>We got an Ubuntu Pro license to leverage their security suite tools to apply the Level 1 - Server profile to our machine. <br/>Link to CIS: <a class="external-link" data-card-appearance="inline" href="https://www.cisecurity.org/benchmark/ubuntu_linux" rel="nofollow">https://www.cisecurity.org/benchmark/ubuntu_linux</a> </p><p>Link to USG-CIS audits of our machine: <a class="external-link" href="http://dlx-webhost.canadacentral.cloudapp.azure.com/usg/" rel="nofollow">USG Audits sorted by Date</a> </p><h4 id="VARLabDLX-LTIWebserversummary-CustomRuleExclusions">Custom Rule Exclusions</h4><ul><li><p>Ensure authentication required for single user mode</p><ul><li><p>This rule is only needed for physical threats who have access to booting into single user mode</p></li><li><p>The dlx-webhost VM is hosted by Azure and has no physical access</p></li></ul></li><li><p>Set the UEFI Boot Loader Password</p><ul><li><p>This rule is only needed for physical threats who have access to booting into the boot loader</p></li><li><p>The dlx-webhost VM is hosted by Azure and has no physical access</p></li></ul></li><li><p>Uninstall httpd Package</p><ul><li><p>Apache server is being used to internally share reports and builds</p></li></ul></li><li><p>Restrict sshd user access via AllowUsers</p><ul><li><p>This was implemented but seems to be giving a false positive we have our main ssh account added to /etc/ssh/sshd_config as shown below</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">AllowUsers *ouruser*</pre>
</div></div></li></ul></li></ul><h3 id="VARLabDLX-LTIWebserversummary-MongoDB">MongoDB</h3><p>Link to MongoDB document here: <a href="CIS-MongoDB-5-Benchmark-Implementation-in-DLX-LTI-Webserver_1251541039.html" data-linked-resource-id="1251541039" data-linked-resource-version="12" data-linked-resource-type="page">CIS MongoDB 5 Benchmark Implementation in DLX-LTI Webserver</a> </p><h3 id="VARLabDLX-LTIWebserversummary-NGINX">NGINX</h3><p>Software Versions and CIS Audit results:</p><p>Staging Environment (<a class="external-link" href="http://staging.canadacentral.cloudapp.azure.com" rel="nofollow">staging.canadacentral.cloudapp.azure.com</a>)<br/>NGINX 1.18.0</p><h4 id="VARLabDLX-LTIWebserversummary-CISAudits+remediationstepstaken">CIS Audits + remediation steps taken<br/></h4><p>2.1.2: build includes http_dav_module<br/>		should rebuild from source --without-http_dav_module<br/>2.1.3: build includes http_gzip_static_module<br/>		should rebuild from source --without-http_gzip_static_module</p><p>2.4.2: requests for unknown host names are rejected<br/>2.4.3: keepalive_timeout is &gt; 10<br/>2.4.4: send_timeout is not specified<br/>2.5.1: server_tokens are enabled<br/>2.5.2: index.html refers to nginx<br/>2.5.3: access to hidden files is not forbidden<br/>3.1:   apply preferred log format<br/>3.4:   logs are compressed daily instead of weekly<br/>3.5:   logs should be sent to a remote log server<br/>	should configure a log server using Azure resources and syslog command<br/>3.6:   logs should be sent to a remote log server<br/>	should configure a log server using Azure resources and syslog command<br/>4.1.1: http should be redirected to https<br/>4.1.3: Private key should be owner read-only<br/>4.1.4: set ssl protocols to TLS1.2 TLS1.3 only<br/>4.1.5: weak ciphers are enabled<br/>4.1.6: use custom diffie-hellman parameters<br/>4.1.7: use online certificate status protocol (OSCP) stapling is enabled<br/>	unsure about OSCP server configuration, needs research to implement<br/>4.1.8: require Strict-Transport-Security header<br/>4.1.9: set proxy_ssl_certificate parameters<br/>4.1.11: preload domain<br/>4.1.12: disable session resumption<br/>4.1.14: ensure only perfect forward secrecy ciphers</p><p>remediate 2.4.2<br/>	remove /etc/nginx/sites-available/default<br/>	remove /etc/nginx/sites-enabled/default (link)<br/>	add lines to /etc/nginx/nginx.conf<br/>	        # remediate CIS security directive 2.4.2: reject requests for invalid host name<br/>        	server {<br/>                	listen 80;<br/>	                listen 443 ssl;<br/>        	        return 404;<br/>	        }</p><p>remediate 2.4.3:<br/>	change line in /etc/nginx/nginx.conf<br/>		keepalive_timeout 10;</p><p>remediate 2.4.4:<br/>	add line to /etc/nginx/nginx.conf<br/>		send_timeout 10;</p><p>remediate 2.5.1:<br/>	un-comment line in /etc/nginx/nginx.conf<br/>		server_tokens off;</p><p>remediate 2.5.2:<br/>	edit /usr/share/nginx/html/index.html<br/>		greatly simplify the text, remove all mention of nginx and make page more snarky</p><p>remediate 2.5.3:<br/>	edit /etc/nginx/nginx.conf and add new location to server <a class="external-link" data-card-appearance="inline" href="http://test.vconestoga.com" rel="nofollow">http://test.vconestoga.com</a> <br/>		location ~ /\. { deny all; return 404; }</p><p>remediate 3.1:<br/>	edit /etc/nginx/nginx.conf and add log format directive<br/>		log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '<br/>		'$status $body_bytes_sent &quot;$http_referer&quot; '<br/>		'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';</p><p>remediate 3.4:<br/>	replace &quot;daily&quot; with &quot;weekly&quot; in nginx log rotation config<br/>		sudo sed -i &quot;s/daily/weekly/&quot; /etc/logrotate.d/nginx</p><p>remediate 4.1.1:<br/>	add server for <a class="external-link" data-card-appearance="inline" href="http://test.vconestoga.com:80" rel="nofollow">http://test.vconestoga.com:80</a> <br/>		server {<br/>                	listen 80;<br/>	                server_name <a class="external-link" data-card-appearance="inline" href="http://test.vconestoga.com" rel="nofollow">http://test.vconestoga.com</a> ;<br/>        	        return 301 <a href="#" rel="nofollow">https://$host$request_uri;</a><br/>        	}</p><p>remediate 4.1.3:<br/>	find private key files<br/>		sudo find /etc/ssl/private -name '<em>' -exec stat -Lc &quot;%n %a&quot; {} +</em><br/><em>	change ownership to -r--------</em><br/><em>		sudo chmod 400 /etc/ssl/private/</em></p><p>remediate 4.1.4:<br/>	edit /etc/nginx/nginx.conf<br/>		ssl_protocols TLSv1.2 TLSv1.3;</p><p>remediate 4.1.5 and 4.1.14:<br/>	edit /etc/nginx/nginx.conf to add ssl_ciphers and proxy_ssl_ciphers<br/>ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHERSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCMSHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSAAES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384::!NULL:!SSLv2:!RC4:!aNULL:!3DES:!IDEA;<br/>proxy_ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHERSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCMSHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSAAES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:!NULL:!SSLv2:!RC4:!aNULL:!3DES:!IDEA;<br/>remediate 4.1.6:<br/>	sudo mkdir /etc/nginx/ssl<br/>	sudo openssl dhparam -out /etc/nginx/ssl/dhparam.pem 2048<br/>	edit /etc/nginx/nginx.conf to add<br/>		ssl_dhparam /etc/nginx/ssl/dhparam.pem;</p><p>remediate 4.1.8:<br/>	edit /etc/nginx/nginx.conf to add line<br/>		add_header Strict-Transport-Security &quot;max-age=15768000;&quot; always;</p><p>remediate 4.1.9:<br/>	edit /etc/nginx/nginx.conf to add<br/>        	proxy_ssl_certificate /etc/ssl/certs/vConWild-chained.crt;<br/>        	proxy_ssl_certificate_key /etc/ssl/private/vConWild-generated-private-key.txt;</p><p>remediate 4.1.11:<br/>	edit /etc/nginx/nginx.conf to add &quot;includeSubDomains; preload&quot;<br/>		add_header Strict-Transport-Security &quot;max-age=15678000; includeSubDomains; preload&quot; always;</p><p>remediate 4.1.12:<br/>	edit /etc/nginx/nginx.conf to add line<br/>		ssl_session_tickets off;</p><h2 id="VARLabDLX-LTIWebserversummary-MongoDB.1"><strong>MongoDB</strong></h2><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="6cffb53b-7b1a-47e9-9630-63fcdf2fa7db" class="confluenceTable"><colgroup><col style="width: 220.0px;"/><col style="width: 193.0px;"/><col style="width: 347.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#b3bac5" colspan="3" class="confluenceTh"><h3 style="text-align: center;" id="VARLabDLX-LTIWebserversummary-MongoDBAccount"><strong>MongoDB Account</strong></h3></th></tr><tr><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>User Name(ID)</strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Authentication Database </strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Permission</strong></p></td></tr><tr><td class="confluenceTd"><p style="text-align: center;">ciCatherine</p></td><td class="confluenceTd"><p style="text-align: center;">admin</p></td><td class="confluenceTd"><p style="text-align: center;">{ role: 'userAdminAnyDatabase<strong>â€™</strong>', db: 'admin' }</p></td></tr><tr><td class="confluenceTd"><p style="text-align: center;">ltiManager</p></td><td class="confluenceTd"><p style="text-align: center;">admin</p></td><td class="confluenceTd"><p style="text-align: center;">{ role: &quot;readWrite&quot;, db: &quot;test&quot; }</p><p style="text-align: center;"> { role: &quot;readWrite&quot;, db: &quot;DLX&quot; }</p></td></tr><tr><td colspan="3" class="confluenceTd"><p><strong>Access Command</strong><br/><strong>[ ciCatherine ]</strong><br/>: mongosh $MONGO_URI --username ciCatherine --password <em>passwordhere</em> --authenticationDatabase admin</p><p><strong>[ltiManager]</strong><br/>: mongosh $MONGO_URI --username ltiManager --password <em>passwordhere</em> --authenticationDatabase admin<br/><br/>$MONGO_URI = mongodb://127.0.0.1:27000/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+2.2.14</p></td></tr></tbody></table></div><div class="table-wrap"><table data-table-width="760" data-layout="center" data-local-id="b9a8986a-c675-4af1-b1fa-54164efecc8a" class="confluenceTable"><colgroup><col style="width: 152.0px;"/><col style="width: 152.0px;"/><col style="width: 152.0px;"/><col style="width: 152.0px;"/><col style="width: 152.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#b3bac5" colspan="5" class="confluenceTh"><h3 style="text-align: center;" id="VARLabDLX-LTIWebserversummary-MongoDBProcesses"><strong>MongoDB Processes</strong></h3></th></tr><tr><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Process Name</strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Version</strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Port Number</strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Config File Dir</strong></p></td><td data-highlight-colour="#f4f5f7" class="confluenceTd"><p style="text-align: center;"><strong>Log Path</strong></p></td></tr><tr><td class="confluenceTd"><p style="text-align: center;">mongod<br/>(MongoDB Server)</p></td><td class="confluenceTd"><p style="text-align: center;">7.0.12</p></td><td class="confluenceTd"><p style="text-align: center;">27000</p></td><td class="confluenceTd"><p style="text-align: center;">/etc/mongod.conf</p></td><td class="confluenceTd"><p style="text-align: center;">/var/log/mongodb/mongod.log</p></td></tr><tr><td class="confluenceTd"><p style="text-align: center;">mongosh<br/>(MongoDB Shell)</p></td><td class="confluenceTd"><p style="text-align: center;">2.2.14</p></td><td class="confluenceTd"><p style="text-align: center;">X</p></td><td class="confluenceTd"><p style="text-align: center;">X</p></td><td class="confluenceTd"><p style="text-align: center;">X</p></td></tr></tbody></table></div><p /><h2 id="VARLabDLX-LTIWebserversummary-AdditionalResources">Additional Resources</h2><p><br/>LTI pages: <a class="external-link" href="https://community.d2l.com/brightspace/kb/articles/23761-lti-1-3-permissions" rel="nofollow">LTI 1.3 permissions - Brightspace (d2l.com)</a></p><p>IMS security spec: <a class="external-link" href="https://www.imsglobal.org/spec/security/v1p1/" rel="nofollow">1EdTech Security Framework v1.1 | IMS Global Learning Consortium</a></p><p>IMS LTI spec: <a class="external-link" href="https://www.imsglobal.org/spec/lti/v1p3/" rel="nofollow">Learning Tools Interoperability Core Specification 1.3 | IMS Global Learning Consortium</a></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1231585323.png">att_1_for_1231421477.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1231487015.png">Blank board-20240719-201703.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1231257628.png">Blank board-20240719-201703.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1233027086.png">Deep link process-20240722-020024.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1233059853.png">Blank board (1)-20240722-020029.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1234173956.png">image-20240722-143942.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1234468865.jpg">Network Communication.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1234468872.jpg">Tool registration swimlane workflow diagram.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1233518601.jpg">Tool registration swimlane workflow diagram.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1233944580.jpg">Adding content flow.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1237254154.jpg">Network Communication for Dynamic LTI Tool Registration.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1237090320.jpg">Network Communication for Adding Content to a Course-20240723-143748.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/1231421477/1237090339.png">Dynamic Registration Diagram (3)-20240723-191230.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 27, 2025 13:35</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
